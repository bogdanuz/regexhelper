# Регистр — архитектура

Краткое описание инструмента «Регистр» (конвертер регистра текста): назначение, структура кода, интеграция.

---

## Назначение

Инструмент меняет регистр введённого текста по выбранному режиму. Поддерживаются кириллица и латиница. Результат обновляется в реальном времени; поле результата редактируемое, есть кнопки «Вставить», «Очистить», «Копировать» и счётчик символов (без пробелов / с пробелами).

Режимы: **ВЕРХНИЙ РЕГИСТР**, **нижний регистр**, **Каждое Слово С Заглавной**, **Первое слово с заглавной**, **иНВЕРТИРОВАННЫЙ**. По умолчанию выбран «нижний регистр». Кнопка «Сбросить» в шапке страницы очищает панель Регистр и сбрасывает выбор режима.

---

## Структура

- **tools/case/** — корень инструмента.
  - **app.js** — точка входа: `initCase()`, экспорт `resetCasePanel()` для вызова из конвертера при «Сбросить»; открытие/закрытие модального окна по кнопке «Регистр» в навигации (overlay, Escape, клик по оверлею, кнопки закрытия).
  - **logic/caseConverter.js** — функции смены регистра: `toUpper`, `toLower`, `toTitleCase`, `toSentenceCase`, `toInverted`, `applyCase(str, mode)`, константа `CASE_MODES`.
  - **ui/caseUI.js** — привязка полей ввода/вывода, кнопок режимов, счётчика, кнопок Вставить/Очистить/Копировать; обновление вывода при вводе и при смене режима.
  - **css/case.css** — стили контента модального окна (`.modal-body-case`, `.case-modal-hint`, `.btn-case`, `.btn-case.active`, поля, счётчик).

---

## Интеграция

- **index.html:** секции «Регистр» на странице нет; в навигации в шапке последним пунктом — кнопка «Регистр» (`#nav-register-btn`, классы `nav-link nav-link-button`), по клику открывается модальное окно `#case-modal-overlay` с модалкой `#case-modal`. В модалке — заголовок, подзаголовок, поля ввода/результата, кнопки режимов, Вставить/Очистить/Копировать, счётчик, кнопка «Закрыть». Подключён `tools/case/css/case.css`.
- **main.js:** импорт `initCase` из `tools/case/app.js`, вызов `initCase()` после `initVisualizer()`.
- **tools/converter/app.js:** импорт `resetCasePanel` из `../case/app.js`; в `initHeaderNav()` секция `#register` не используется (Регистр не участвует в подчёркивании по скроллу); в `resetAll()` в `onConfirm` вызывается `resetCasePanel()`.

Истории операций у Регистра нет; сброс не затрагивает историю конвертаций.

---

## Тесты

- **tests/test.html:** вкладка «Регистр» — тесты логики (toUpper, toLower, toTitleCase, toSentenceCase, toInverted, applyCase, CASE_MODES) и при открытом index.html — наличие модалки `#case-modal-overlay` и кнопки `#nav-register-btn`, наличие полей ввода и кнопок режимов в DOM.
- **tests/case-test.mjs** — те же проверки логики в Node (15 тестов). Запуск из корня: `node tests/run-tests.mjs` (входит в набор Node-тестов) или `node tests/run-tests.mjs --browser-case` (только Регистр в Playwright).
