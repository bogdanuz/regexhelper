# Статус проекта — RegexHelper

Текущее состояние и ближайшие планы.

**Правило:** в заголовках и описаниях не указывать версию (v4, 4.0) — только «RegexHelper».

---

## Текущее состояние

- **Приложение:** конвертер триггеров в regex с поддержкой простых и связанных триггеров, параметров (любой символ `\w`, латиница/кириллица, транслитерация, склонения с авто/точными окончаниями, опциональные символы), соединителей, истории. Работает в браузере без сборки.
- **Структура:** миграция на `core/`, `shared/`, `tools/converter/`, `assets/` завершена. Старый код и скрипты миграции удалены. **Аудит кода завершён** (2026-02-21): удалены неиспользуемые модули, актуализированы тесты, обновлена документация.
- **UI конвертера:** простые и связанные триггеры разнесены в **переключаемую панель** (верхняя часть страницы). По умолчанию активна панель «Связанные триггеры»; переключение на «Простые триггеры» — клик по заголовку панели. Каждый режим конвертируется отдельно. Кнопка «Очистить панель» корректно переключается между режимами. **Панель результата** растянута на всю ширину и расположена под переключаемой панелью; кнопки: «Конвертировать», «Копировать», **«В тестер»**, **«В визуализатор»**, **компактная «Очистить»** (справа).
- **Тесты:** браузерная страница **tests/test.html** (240+ тестов, 5 вкладок); Node тесты: p0-logic (94), converter-reference (61), visualizer (17), case (15), tester (50) — всего **237 Node тестов**. **Все тесты проходят на 100%.** Запуск: `npm run test` (Node) или `npm run test:browser` (Playwright); единый скрипт **tests/run-tests.mjs**. Все тесты актуализированы под новую архитектуру, включая авто-удвоение букв, опциональные символы, расширенные склонения, разделение ед./мн. числа, корректную группировку скобок и исправление инвертации групп (2026-02-21).
- **Визуализатор:** интегрирован regexper-static (бандл в **assets/libs/regexper/**). Секция в index.html, форма, hash, zoom/pan, экспорт. Документация: **docs/visualizer/**.
- **Регистр:** инструмент конвертера регистра текста (tools/case/). Модальное окно, открывается по кнопке «Регистр» в навигации. Документация: **docs/case/ARCHITECTURE.md**.
- **Тестер:** инструмент проверки regex на тестовой строке (tools/tester/). Секция в index.html между Визуализатором и Историей. Flavor Python (emulated). Документация: **docs/tester/ARCHITECTURE.md**.
- **Документация:** архитектура, структура, статус, навигация по docs. WIKI полностью переписана (2026-02-21) — простое руководство пользователя.

---

## Стабильно ✅

Все компоненты протестированы и работают корректно.

### Конвертация
- Простые триггеры: textarea → regex с альтернацией `(слово1|слово2|...)`
- Связанные триггеры: визуальный конструктор → regex с соединителями

### Параметры (все работают)
| Параметр | Regex | Статус |
|----------|-------|--------|
| Лат/Кир | `[аa]`, `[оo]` | ✅ |
| Транслит | `[рr][оo][бb][лl]` | ✅ |
| Склонения (авто) | `слов(о\|а\|у)` — сущ., прил., прич. | ✅ |
| Склонения (точные) | `корень(ок1\|ок2)` | ✅ |
| Любой символ (\w) | `корень\w{1,10}` | ✅ |
| Границы слова (\b) | `\bслово\b` | ✅ |
| Пробел после (\s) | `слово\s` | ✅ |
| Опциональные | `пасс?ивный` | ✅ |

### Склонения: расширенная поддержка (2026-02-21)
| Часть речи | Пример | Статус |
|------------|--------|--------|
| Существительные (ед.ч.) | дом → дом(а\|у\|ом\|е) | ✅ |
| Существительные (мн.ч.) | книги → книг(и\|ам\|ами\|ах) | ✅ |
| Прилагательные | красивый → красив(ый\|ого\|ому...) | ✅ |
| Причастия (-нный, -тый, -мый, -щий) | написанный → написанн(ый\|ого...) | ✅ |
| Супплетивные формы мн.ч. | дети → дет(и\|ей\|ям\|ьми\|ях) | ✅ |
| Глаголы | ❌ (используйте `\w` или точные окончания) | — |
| Краткие прилагательные | ❌ (используйте точные окончания) | — |

**Важно:** Ед. и мн. число склоняются **отдельно**. Если ввести «ребёнок» — получите только формы ед. числа (ребёнка, ребёнку...), без «дети». Для мн. числа введите отдельный триггер «дети».

### Автозамены
- `ё → [её]` ✅
- `ь → [ьъ]` ✅
- `ъ → [ъь]` ✅
- Авто-удвоения: `аллея → алл?ея` ✅

### Соединители (все паттерны верны)
| Режим | Паттерн | Статус |
|-------|---------|--------|
| Альтернация | `\|` | ✅ |
| Любое расстояние | `[\s\S]+` | ✅ |
| Абзац | `.+` | ✅ |
| Строка | `[^\n]+` | ✅ |
| Своё значение | `.{min,max}` | ✅ |

### Визуальный конструктор (LinkedBuilder)
- Чипы триггеров с редактированием ✅
- Соединители-бейджи ✅
- Цветные рамки групп (вложенность) ✅
- Drag & Drop ✅
- Группировка/разгруппировка ✅
- Действия с группой (дублировать, инвертировать) ✅
- Исправлена инвертация: соединители корректно переставляются вместе с элементами ✅
- Кнопка «+» для быстрого добавления триггера в поле ✅
- Скобки только для явных групп (без лишнего оборачивания) ✅
- Авто-удвоение: вторая одинаковая буква опциональна (аллея → алл?ея) ✅
- Параметр «Опциональные символы (?)» с попап-выбором символов ✅
- Кнопка «(?)» добавлена в панель параметров простых триггеров ✅
- Нумерация строк: при 2+ визуальных строках все номера в кружочках (18×18px), вертикальная пунктирная линия-разделитель, индикатор «продолжение →» в конце строк ✅

### Дополнительно
- История конвертаций (до 300 записей, 7 дней) ✅
- Модальные окна подтверждения (кастомные) ✅
- WIKI — руководство пользователя ✅
- Совместимость параметров (автоснятие конфликтов) ✅

---

## Результаты тестирования

| Тесты | Результат |
|-------|-----------|
| Node: p0-logic-test | **94/94 ✅** |
| Node: converter-reference-test | **61/61 ✅** |
| Node: visualizer-test | **17/17 ✅** |
| Node: case-test | **15/15 ✅** |
| Node: tester-test | **50/50 ✅** |
| Браузерные тесты | **240+/240+ ✅** |
| **Итого** | **477+/477+ ✅** |

---

## Удалённые модули (аудит 2026-02-21)

Следующие файлы удалены как неиспользуемые после перехода на linkedBuilder:
- `tools/converter/ui/groupManager.js` — старый менеджер групп
- `tools/converter/ui/triggerManager.js` — старый менеджер триггеров
- `tools/converter/ui/dragDrop.js` — старый drag & drop
- `tools/converter/ui/distanceDropdown.js` — старый UI соединителей
- `tools/converter/logic/linkedConverter.js` — старый конвертер связанных триггеров
- `tools/converter/converters/prefix.js` — функционал заменён параметром `\w`
- `archive/` — архивные файлы
- `temp/` — временные файлы

---

## Планы (кратко)

- По необходимости — обновлять тематические документы в `docs/`.
